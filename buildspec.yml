version: 0.2

phases:
  install:
    commands:
      - yum install java-17-amazon-corretto-devel.x86_64 -y
  pre_build:
    commands:
      - echo Nothing to do in the pre_build phase
      - mvn clean 
  build:
    commands:
      - echo Build started on `date`
      - mvn install -DskipTests
  post_build:
    commands:
      - echo Build completed on `date`
      - echo Building Docker image
      - docker build -t ishaqsha/coach:latest .
      - docker run -d -p 8080:8080 ishaqsha/coach:latest
artifacts:
  files:
    #- target/Devops-1.0.0.war
    - '**/*'
